<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Olimpiyat KokoreÃ§ MenÃ¼</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <style>
    body { background-color: #fff7f0; }
    .active-tab { background-color: #fb923c; color: white; }
    #categoryTabs::-webkit-scrollbar { display: none; }
    #categoryTabs { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body class="text-gray-800">
  <header class="bg-orange-500 text-white p-4 flex justify-between items-center sticky top-0 z-10 shadow-md">
    <h1 class="text-2xl font-bold">Olimpiyat KokoreÃ§</h1>
    <div class="flex items-center gap-2">
      <button id="langTR" class="bg-white text-orange-600 px-3 py-1 rounded font-bold">TR</button>
      <button id="langEN" class="bg-white text-orange-600 px-3 py-1 rounded">EN</button>
      <button id="adminLoginBtn" class="bg-white text-orange-600 px-3 py-1 rounded">âš™ï¸ YÃ¶netici GiriÅŸi</button>
    </div>
  </header>

  <nav id="categoryTabs" class="flex overflow-x-auto bg-white shadow p-2 space-x-2 text-sm font-semibold sticky top-[64px] z-10"></nav>

  <main class="p-4">
    <div id="menuContainer" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>

    <div id="contactSection" class="hidden text-center mt-6 bg-white rounded-xl shadow p-6 max-w-lg mx-auto">
      <h2 id="contactTitle" class="text-2xl font-bold text-orange-600 mb-3">Ä°letiÅŸim</h2>
      <p id="contactAddress" class="mb-3">ğŸ“ Yamanevler Mah. AlemdaÄŸ Caddesi No 159 D<br>Olimpiyat KokoreÃ§ Ãœmraniye - Ä°stanbul</p>
      <p class="mt-2">ğŸ“ <a href="tel:02163357920" id="contactPhone" class="text-orange-600 font-semibold text-lg hover:underline">0216 335 79 20</a></p>
    </div>
  </main>

  <div id="imageModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-50 transition-opacity">
    <img id="modalImage" class="max-h-[90vh] max-w-[90vw] rounded-xl shadow-2xl transition-transform">
  </div>

  <div id="adminPanel" class="hidden fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50">
    <div class="bg-white rounded-xl shadow-lg p-6 w-96 relative">
      <button id="closeAdmin" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800">âœ–</button>
      <h2 class="text-xl font-bold mb-3 text-orange-600">YÃ¶netici GiriÅŸi</h2>
      <input id="passwordInput" type="password" placeholder="Åifreyi giriniz" class="border w-full p-2 rounded mb-3 focus:ring-orange-500 focus:border-orange-500" />
      <button id="checkPassword" class="bg-orange-500 text-white px-4 py-2 rounded w-full hover:bg-orange-600 transition">GiriÅŸ Yap</button>
      <p id="loginError" class="text-red-600 text-sm mt-2 hidden">HatalÄ± ÅŸifre!</p>
    </div>
  </div>

  <div id="editPanel" class="hidden fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50">
    <div class="bg-white rounded-xl shadow-lg p-6 w-[600px] relative max-h-[90vh] overflow-y-auto">
      <button id="closeEdit" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800">âœ–</button>
      <h2 class="text-xl font-bold mb-3 text-orange-600">ÃœrÃ¼n YÃ¶netimi</h2>
      
      <div class="flex flex-col gap-2 mb-4 p-4 border rounded-lg bg-orange-50">
        <h3 class="font-bold text-lg mb-1">Yeni ÃœrÃ¼n Ekle</h3>
        <input id="productName" placeholder="ÃœrÃ¼n AdÄ± (TR)" class="border p-2 rounded" />
        <input id="productDesc" placeholder="AÃ§Ä±klama (TR)" class="border p-2 rounded" />
        <input id="productDescEN" placeholder="AÃ§Ä±klama (EN)" class="border p-2 rounded" />
        <input id="productPrice" type="number" placeholder="Fiyat (â‚º)" class="border p-2 rounded" />
        <input id="productImageFile" type="file" accept="image/*" class="border p-2 rounded bg-white" />
        <select id="productCategory" class="border p-2 rounded"></select>
        <button id="addProduct" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition">ÃœrÃ¼n Ekle</button>
      </div>

      <h3 class="font-semibold mb-2">Mevcut ÃœrÃ¼nler</h3>
      <div class="flex gap-2 mb-2">
        <select id="filterCategory" class="border p-2 rounded flex-1"></select>
      </div>
      <ul id="productList" class="flex flex-col gap-2"></ul>
    </div>
  </div>

  <div id="editProductModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50">
    <div class="bg-white rounded-xl shadow-lg p-6 w-[500px] relative max-h-[90vh] overflow-y-auto">
      <button id="closeEditProductModal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800">âœ–</button>
      <h2 class="text-xl font-bold mb-3 text-orange-600">ÃœrÃ¼n DÃ¼zenle</h2>
      
      <input type="hidden" id="editProductKey" />
      
      <div class="flex flex-col gap-3">
        
        <div class="p-3 border rounded-lg bg-gray-50">
            <h3 class="font-semibold mb-2">GÃ¶rsel DÃ¼zenleme</h3>
            <img id="editImagePreview" class="w-full h-32 object-cover rounded-lg mb-2 border border-gray-300" src="" alt="ÃœrÃ¼n GÃ¶rseli Ã–nizleme">
            
            <label class="block text-sm font-medium mb-1">Yeni GÃ¶rsel URL'si:</label>
            <input id="editImageURL" placeholder="Yeni GÃ¶rsel URL'si girin" class="border w-full p-2 rounded mb-2 text-sm" />

            <label class="block text-sm font-medium mb-1">Veya Yeni GÃ¶rsel YÃ¼kle:</label>
            <input id="editImageFile" type="file" accept="image/*" class="border w-full p-1 rounded bg-white text-sm" />
            <p class="text-xs text-gray-500 mt-1">Dosya seÃ§ilirse URL alanÄ± yok sayÄ±lÄ±r.</p>
        </div>

        <input id="editName" placeholder="ÃœrÃ¼n AdÄ± (TR)" class="border p-2 rounded" />
        <input id="editNameEN" placeholder="Product Name (EN)" class="border p-2 rounded" />
        <input id="editDesc" placeholder="AÃ§Ä±klama (TR)" class="border p-2 rounded" />
        <input id="editDescEN" placeholder="Description (EN)" class="border p-2 rounded" />
        <input id="editPrice" type="number" placeholder="Fiyat (â‚º)" class="border p-2 rounded" />
        <select id="editCategory" class="border p-2 rounded"></select>

        <button id="saveEditProduct" class="bg-green-500 text-white px-4 py-2 rounded mt-4 hover:bg-green-600 transition">DeÄŸiÅŸiklikleri Kaydet</button>
      </div>
    </div>
  </div>

  <script>
    // --- Firebase YapÄ±landÄ±rmasÄ± (KULLANICI TARAFINDAN GÃœNCELLENDÄ°) ---
    const firebaseConfig = {
        apiKey: "AIzaSyDcYNF0hMow-y1MuV3GXLG9vY_MK0tJTGs",
        authDomain: "olimpiyatkokorecmenu.firebaseapp.com",
        projectId: "olimpiyatkokorecmenu",
        storageBucket: "olimpiyatkokorecmenu.firebasestorage.app",
        messagingSenderId: "987017604417",
        appId: "1:987017604417:web:b6c4858712dc66d14745c0",
        measurementId: "G-HB0J7BFZ9N",
        databaseURL: "https://olimpiyatkokorecmenu-default-rtdb.europe-west1.firebasedatabase.app"
    };

    // Firebase'i baÅŸlat
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    // 'products' referansÄ±nÄ±, Firebase Realtime Database'deki ana Ã¼rÃ¼n dizinini iÅŸaret eder.
    const productsRef = database.ref('products');

    // --- HTML Element TanÄ±mlamalarÄ± ---
    const adminLoginBtn = document.getElementById('adminLoginBtn');
    const adminPanel = document.getElementById('adminPanel');
    const editPanel = document.getElementById('editPanel');
    const checkPassword = document.getElementById('checkPassword');
    const passwordInput = document.getElementById('passwordInput');
    const loginError = document.getElementById('loginError');
    const closeAdmin = document.getElementById('closeAdmin');
    const closeEdit = document.getElementById('closeEdit');
    const menuContainer = document.getElementById('menuContainer');
    const productList = document.getElementById('productList');
    const contactSection = document.getElementById('contactSection');
    const tabButtonsContainer = document.getElementById('categoryTabs');
    const imageModal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const langTR = document.getElementById('langTR');
    const langEN = document.getElementById('langEN');
    const contactTitle = document.getElementById('contactTitle');
    const contactAddress = document.getElementById('contactAddress');
    const adminLoginButton = document.getElementById('adminLoginBtn');

    // YÃ¶netim/DÃ¼zenleme Elementleri
    const productNameInput = document.getElementById('productName');
    const productDescInput = document.getElementById('productDesc');
    const productDescENInput = document.getElementById('productDescEN');
    const productPriceInput = document.getElementById('productPrice');
    const productImageFileInput = document.getElementById('productImageFile');
    const productCategorySelect = document.getElementById('productCategory');
    const addProductButton = document.getElementById('addProduct');
    const filterCategorySelect = document.getElementById('filterCategory');
    const editProductModal = document.getElementById('editProductModal');
    const closeEditProductModal = document.getElementById('closeEditProductModal');
    const editProductKeyInput = document.getElementById('editProductKey'); 
    const editNameInput = document.getElementById('editName');
    const editNameENInput = document.getElementById('editNameEN');
    const editDescInput = document.getElementById('editDesc');
    const editDescENInput = document.getElementById('editDescEN');
    const editPriceInput = document.getElementById('editPrice');
    const editCategorySelect = document.getElementById('editCategory');
    const saveEditProductButton = document.getElementById('saveEditProduct');
    const editImagePreview = document.getElementById('editImagePreview');
    const editImageURLInput = document.getElementById('editImageURL');
    const editImageFile = document.getElementById('editImageFile');
    
    let language = 'TR'; 
    let products = []; // ÃœrÃ¼nler Firebase'den Ã§ekilecek

    // Kategori Ã§evirileri
    const categoryTranslations = {
      'TÃ¼mÃ¼': 'All', 'MenÃ¼ler': 'Menus', 'KokoreÃ§': 'KokoreÃ§', 'Tavuk DÃ¶ner': 'Chicken DÃ¶ner',
      'KÃ¶fte': 'Meatballs', 'CiÄŸer': 'Liver', 'Hamburger': 'Hamburger',
      'Yan Lezzetler': 'Side Dishes', 'Ä°Ã§ecekler': 'Drinks', 'Ä°letiÅŸim': 'Contact'
    };

    let categoriesTR = Object.keys(categoryTranslations);
    let categoriesEN = Object.values(categoryTranslations);

    // --- FIREBASE CRUD Ä°ÅLEMLERÄ° ---

    // Gelen Firebase verisini dizinize dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r
    function transformProducts(dataSnapshot) {
      const productsArray = [];
      dataSnapshot.forEach(childSnapshot => {
        // Firebase key'i (Benzersiz anahtar) al ve Ã¼rÃ¼ne ekle
        const product = childSnapshot.val();
        product.key = childSnapshot.key;
        productsArray.push(product);
      });
      return productsArray;
    }

    // GerÃ§ek zamanlÄ± dinleyici. Veri deÄŸiÅŸtiÄŸinde otomatik Ã§alÄ±ÅŸÄ±r.
    function setupFirebaseListener() {
        productsRef.on('value', (snapshot) => {
            if (snapshot.exists()) {
                products = transformProducts(snapshot);
            } else {
                products = [];
            }
            // Veri deÄŸiÅŸtiÄŸi anda tÃ¼m arayÃ¼zÃ¼ gÃ¼ncelle
            updateLanguageContent(); 

            // EÄŸer admin paneli aÃ§Ä±ksa, listeyi de gÃ¼ncelle
            if (!editPanel.classList.contains('hidden')) {
                // Filtre kategorisi seÃ§ili olmayabilir, bu yÃ¼zden kontrol ekledik
                const currentFilter = filterCategorySelect.value || 'TÃ¼mÃ¼'; 
                renderEditList(currentFilter);
            }
        }, (error) => {
            console.error("Firebase veri okuma hatasÄ±:", error);
            alert("MenÃ¼yÃ¼ yÃ¼klerken bir hata oluÅŸtu: " + error.message);
        });
    }

    // ÃœrÃ¼n Ekle
    async function addProductToFirebase(product) {
        await productsRef.push(product);
    }

    // ÃœrÃ¼n GÃ¼ncelle
    async function updateProductInFirebase(key, updates) {
        await productsRef.child(key).update(updates);
    }

    // ÃœrÃ¼n Sil
    async function deleteProductFromFirebase(key) {
        await productsRef.child(key).remove();
    }


    // --- UYGULAMA MANTIÄI VE UI GÃœNCELLEMELERÄ° ---

    function createCategoryTabs(){
        const tabButtonsContainer = document.getElementById('categoryTabs');
        tabButtonsContainer.innerHTML = '';
        const categoriesToIterate = categoriesTR;

        categoriesToIterate.forEach((catTR, index) => {
            let btn = document.createElement('button');
            const catName = language === 'TR' ? catTR : categoriesEN[index];

            btn.className='tabBtn px-3 py-1 rounded whitespace-nowrap transition-colors duration-150 hover:bg-orange-200';
            btn.dataset.category=catTR;
            btn.textContent=catName;

            if(catTR==='TÃ¼mÃ¼') {
                btn.classList.add('active-tab');
            }

            btn.addEventListener('click',()=>{
                document.querySelectorAll('.tabBtn').forEach(b=>b.classList.remove('active-tab'));
                btn.classList.add('active-tab');
                const categoryKey = btn.dataset.category;

                if(categoryKey==='Ä°letiÅŸim'){
                    menuContainer.innerHTML='';
                    contactSection.classList.remove('hidden');
                } else {
                    contactSection.classList.add('hidden');
                    renderMenu(categoryKey);
                }
            });
            tabButtonsContainer.appendChild(btn);
        });
    }

    function renderMenu(category='TÃ¼mÃ¼'){
      menuContainer.innerHTML='';
      const filtered = category==='TÃ¼mÃ¼'?products:products.filter(p=>p.category===category);

      filtered.forEach(p=>{
        const card=document.createElement('div');
        card.className='bg-white rounded-xl shadow p-4 flex flex-col hover:shadow-lg transition-shadow duration-200';
        
        const name = language==='TR'?p.name:p.nameEN||p.name;
        const desc = language==='TR'?p.desc:p.descEN||p.desc||'';

        card.innerHTML=`
          <img src='${p.image}' alt='${name}' class='w-full h-40 object-cover rounded-lg mb-3 cursor-pointer'>
          <h3 class='font-bold text-xl mb-1'>${name}</h3>
          <p class='text-gray-600 text-sm mb-3 flex-grow'>${desc}</p>
          <p class='bg-orange-100 text-orange-700 inline-block px-3 py-1 rounded-full font-bold text-lg self-start'>${p.price} â‚º</p>
        `;
        card.querySelector('img').addEventListener('click',()=>{modalImage.src=p.image;imageModal.classList.remove('hidden');});
        menuContainer.appendChild(card);
      });
    }

    function updateLanguageContent() {
        if (language === 'TR') {
            adminLoginButton.innerHTML = 'âš™ï¸ YÃ¶netici GiriÅŸi';
            contactTitle.textContent = 'Ä°letiÅŸim';
            contactAddress.innerHTML = 'ğŸ“ Yamanevler Mah. AlemdaÄŸ Caddesi No 159 D<br>Olimpiyat KokoreÃ§ Ãœmraniye - Ä°stanbul';
            langTR.style.fontWeight = 'bold';
            langEN.style.fontWeight = 'normal';
        } else { 
            adminLoginButton.innerHTML = 'âš™ï¸ Admin Login';
            contactTitle.textContent = 'Contact';
            contactAddress.innerHTML = 'ğŸ“ Yamanevler Mah. AlemdaÄŸ Caddesi No 159 D<br>Olimpiyat KokoreÃ§ Ãœmraniye - Istanbul (Turkey)';
            langTR.style.fontWeight = 'normal';
            langEN.style.fontWeight = 'bold';
        }

        createCategoryTabs();
        const activeTab = document.querySelector('.tabBtn.active-tab');
        const activeCategoryKey = activeTab ? activeTab.dataset.category : 'TÃ¼mÃ¼';
        
        if (activeCategoryKey === 'Ä°letiÅŸim') {
            menuContainer.innerHTML = '';
            contactSection.classList.remove('hidden');
        } else {
            contactSection.classList.add('hidden');
            renderMenu(activeCategoryKey);
        }
    }
    
    // Kategori dropdown'larÄ±nÄ± doldurur
    function populateCategorySelects() {
        const options = categoriesTR.filter(c => c !== 'TÃ¼mÃ¼' && c !== 'Ä°letiÅŸim');
        
        [productCategorySelect, filterCategorySelect, editCategorySelect].forEach(select => {
            select.innerHTML = ''; 
            options.forEach(cat => {
                const option = document.createElement('option');
                option.textContent = cat;
                select.appendChild(option);
            });
            if (select === filterCategorySelect) {
                const allOption = document.createElement('option');
                allOption.textContent = 'TÃ¼mÃ¼';
                select.insertBefore(allOption, select.firstChild);
                select.value = 'TÃ¼mÃ¼';
            }
        });
    }

    function renderEditList(filter='TÃ¼mÃ¼') {
      productList.innerHTML = '';
      const filtered = filter==='TÃ¼mÃ¼'?products:products.filter(p=>p.category===filter);

      filtered.forEach((p) => {
        const item = document.createElement('li');
        item.className = 'flex justify-between items-center bg-white p-3 rounded border shadow-sm';
        item.innerHTML = `
          <span class="font-medium text-sm">${p.name} (${p.category}) - ${p.price} â‚º</span>
          <div>
            <button data-key="${p.key}" class="editBtn bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600 transition mr-2">DÃ¼zenle</button>
            <button data-key="${p.key}" class="deleteBtn bg-red-500 text-white px-2 py-1 rounded text-xs hover:bg-red-600 transition">Sil</button>
          </div>
        `;
        productList.appendChild(item);
      });

      // Silme iÅŸlevi
      document.querySelectorAll('.deleteBtn').forEach(btn => {
        btn.addEventListener('click', async (e) => {
          const productKeyToDelete = e.target.dataset.key;
          
          if (confirm("Bu Ã¼rÃ¼nÃ¼ silmek istediÄŸinizden emin misiniz? (Firebase'den Silinecek)")) {
              try {
                  await deleteProductFromFirebase(productKeyToDelete);
                  alert("ÃœrÃ¼n baÅŸarÄ±yla silindi ve Firebase'e kaydedildi.");
              } catch (error) {
                  alert("Silme iÅŸlemi baÅŸarÄ±sÄ±z oldu: " + error.message);
              }
          }
        });
      });

      // DÃœZENLEME Ä°ÅLEVÄ°
      document.querySelectorAll('.editBtn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const productKeyToEdit = e.target.dataset.key;
          const productToEdit = products.find(p => p.key === productKeyToEdit);
          
          if (productToEdit) {
            editProductKeyInput.value = productKeyToEdit; 
            editNameInput.value = productToEdit.name;
            editNameENInput.value = productToEdit.nameEN;
            editDescInput.value = productToEdit.desc;
            editDescENInput.value = productToEdit.descEN;
            editPriceInput.value = productToEdit.price;
            editCategorySelect.value = productToEdit.category;
            
            editImageURLInput.value = productToEdit.image;
            editImagePreview.src = productToEdit.image;
            editImageFile.value = null; 
            
            editProductModal.classList.remove('hidden');
          }
        });
      });
    }

    // --- EVENT LISTENERS ---

    langTR.addEventListener('click',()=>{
      language='TR';
      updateLanguageContent();
    });

    langEN.addEventListener('click',()=>{
      language='EN';
      updateLanguageContent();
    });

    imageModal.addEventListener('click',()=>imageModal.classList.add('hidden'));

    adminLoginBtn.addEventListener('click',()=>adminPanel.classList.remove('hidden'));
    closeAdmin.addEventListener('click',()=>adminPanel.classList.add('hidden'));
    closeEdit.addEventListener('click',()=>editPanel.classList.add('hidden'));
    closeEditProductModal.addEventListener('click',()=>editProductModal.classList.add('hidden'));

    checkPassword.addEventListener('click',()=>{
      if(passwordInput.value==='admin123'){ 
        adminPanel.classList.add('hidden');
        editPanel.classList.remove('hidden');
        loginError.classList.add('hidden');
        passwordInput.value='';
        populateCategorySelects();
        renderEditList(); 
      } else {
        loginError.classList.remove('hidden');
      }
    });

    filterCategorySelect.addEventListener('change', (e) => {
      renderEditList(e.target.value);
    });

    // ÃœRÃœN EKLEME (Firebase)
    addProductButton.addEventListener('click', async () => {
      const name = productNameInput.value.trim();
      const desc = productDescInput.value.trim();
      const descEN = productDescENInput.value.trim();
      const price = parseFloat(productPriceInput.value);
      const category = productCategorySelect.value;
      
      if (!name || isNaN(price) || !category) {
        alert('LÃ¼tfen Ã¼rÃ¼n adÄ±, geÃ§erli fiyat ve kategoriyi giriniz.');
        return;
      }
      
      const imageURL = 'https://images.unsplash.com/photo-1543825700-6c9233634125'; // Placeholder

      const newProduct = {
        name, nameEN: name, desc, descEN: descEN || desc,
        price, image: imageURL, category
      };

      try {
          await addProductToFirebase(newProduct); 
          alert(`"${name}" Ã¼rÃ¼nÃ¼ baÅŸarÄ±yla eklendi ve Firebase'e kaydedildi.`);
          // InputlarÄ± temizle
          productNameInput.value = ''; productDescInput.value = ''; productDescENInput.value = ''; 
          productPriceInput.value = ''; productImageFileInput.value = '';
      } catch (error) {
          alert("Ekleme iÅŸlemi baÅŸarÄ±sÄ±z oldu: " + error.message);
      }
    });
    
    // ÃœRÃœN DÃœZENLEME KAYDETME Ä°ÅLEVÄ° (Firebase)
    saveEditProductButton.addEventListener('click', async () => {
        const productKey = editProductKeyInput.value;
        
        let newImageURL = editImageURLInput.value.trim(); 

        if (editImageFile.files.length > 0) {
             // NOT: GerÃ§ek projede Firebase Storage entegrasyonu gerekir.
             alert("GÃ¶rsel dosyasÄ± yÃ¼kleme iÅŸlemi iÃ§in Firebase Storage entegrasyonu gereklidir. Åimdilik sadece URL kullanÄ±ldÄ±.");
             // Ä°stenirse burada geÃ§ici bir URL atanabilir: newImageURL = URL.createObjectURL(editImageFile.files[0]);
        } 

        const updates = {
            name: editNameInput.value.trim(),
            nameEN: editNameENInput.value.trim(),
            desc: editDescInput.value.trim(),
            descEN: editDescENInput.value.trim(),
            price: parseFloat(editPriceInput.value),
            category: editCategorySelect.value,
            image: newImageURL
        };
        
        if (isNaN(updates.price)) {
            alert('LÃ¼tfen geÃ§erli bir fiyat giriniz.');
            return;
        }

        try {
            await updateProductInFirebase(productKey, updates); 
            editProductModal.classList.add('hidden');
            alert(`"${updates.name}" Ã¼rÃ¼nÃ¼ baÅŸarÄ±yla gÃ¼ncellendi ve Firebase'e kaydedildi.`);
        } catch (error) {
            alert("GÃ¼ncelleme iÅŸlemi baÅŸarÄ±sÄ±z oldu: " + error.message);
        }
    });


    // --- Ä°lk YÃ¼kleme ---
    document.addEventListener('DOMContentLoaded', () => {
      // Firebase'den anlÄ±k veri akÄ±ÅŸÄ±nÄ± baÅŸlat
      setupFirebaseListener(); 
    });
  </script>
</body>
</html>
